@using CBBW.BOL.EMN
@model List<EMNNoteList>
@{
    ViewBag.Title = "Employees Travelling Schedule Details – APPROVAL(FOR MFG. CENTERS RECORDED AT NZB) ";
}

<div class="container">
    <div class="row newTable">
        <div class="fixedElement">
            <div class="col-md-12" style="position: relative;">
                <div class="heading_text_btn mb-4 mt-4">
                    <div class="leftButton">
                        <button type="submit" class="btn btn-primary me-2" onclick="window.location.href='/Security/EMN/EMNApproveNote';">
                            <i data-feather="plus-circle"></i>
                            Add
                        </button>
                    </div>
                    <h2>@ViewBag.Title </h2>
                </div>
            </div>
        </div>

        <div class="table-responsive">

            <table id="tblmgp" class="table table-bordered btnalign mt-4">
                <thead>
                    <tr>
                        <th scope="col"> SL.No.</th>
                        <th scope="col">Note No.</th>
                        <th scope="col">Date</th>
                        <th scope="col">Center Code & Name</th>


                        <th scope="col" style="background: pink;color: #000;">Action</th>
                    </tr>
                </thead>

                <thead>
                    <tr>
                        <th scope="col">&nbsp;</th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterNoteno" type="text" class="form-control" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterDate" type="text" class="form-control" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterCenterCN" type="text" class="form-control" placeholder="Search...">
                            </div>
                        </th>

                        <th scope="col">&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Count > 0)
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.RowNumber</td>
                                <td>@item.NoteNumber</td>
                                <td>@item.EntryDateDisplay</td>
                                <td>@item.CenterCodeName</td>

                                <td>
                                    <span class="actionBtn">
                                        <button type="button" class="btn primaryLink" value="btn" data-toggle="tooltip" data-placement="top"
                                                title="Details">
                                            <i data-feather="eye"></i>
                                        </button>

                                    </span>
                                </td>
                            </tr>

                        }
                    }

                </tbody>
            </table>


        </div>






    </div>
</div>


@section headers
    {

}
@section scripts{
    <script>
        $(document).ready(function () {
            $('#tblmgp').dataTable({
                columns: [
                    { 'data': 'RowNumber' },
                    { 'data': 'NoteNumber' },
                    { 'data': 'EntryDateDisplay' },
                    { 'data': 'CenterCodeName' },

                    {
                        'data': 'NoteNumber', render: function (data, type, row, meta) {
                            //var viewBtn = '<button type="button" class="btn primaryLink" data-toggle="tooltip" data-placement="top"> <i data-feather="eye"></i></button>';
                            var viewBtn = '<button type="button" id="' + row.NoteNumber + '" data-btn="V" onclick="FnViewNote(this)" class="btn primaryLink" data-toggle="tooltip" data-placement="top" title="Details"> <svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx=12 cy=12 r=3></circle></svg></button>';
                           
                            var mbtns = '<span class="actionBtn d-block">';
                            mbtns = mbtns + viewBtn;
                            mbtns = mbtns + '</span>';
                            return type === 'display' ? mbtns : data;
                        }
                    },
                ],

                bServerSide: true,
                sAjaxSource: '/Security/EMN/GetEMNNZBApprovalforListPage',
                "pagingType": "input"
            });
        });

        function FnViewNote(ctrl) {
            var notenumber = $(ctrl).attr('id');
            var btnType = $(ctrl).attr('data-btn');
           
          var destinationurlV = '/Security/EMN/ApprovalDetails?NoteNumber=' + notenumber + '&CanDelete=0&CBUID=0';
           
            if (btnType == 'V') { window.location.href = destinationurlV;}


        };


        //function GetDetailsPage(ctrl) {
        //    var targetid = $(ctrl).attr("id");
        //    var targetval = $(ctrl).attr('data-value');
        //    var url = '/Security/ETS/Details?NoteNumber=' + targetid;
        //    window.location.href = url;
        //};
    </script>
}