@model CBBW.BOL.TADA.TADAParam
@{
    ViewBag.Title = "TA & DA Parameters";
}
<div class="row newTable">
    @using (Html.BeginForm())
    {
        @Html.HiddenFor(m => m.IsLocalConvAllowed)
        <div class="col-md-12">
            <div class="fixedElement">
                <div class="col-md-12" style="position: relative;">
                    <div class="heading_text_btn mb-4 mt-4">
                        <div class="leftButton">
                            <button type="submit" name="Submit" value="back"
                                    class="btn btn-primary me-2"
                                    @*onclick="window.location.href='@Url.Action("CreateRule", "TADARules", new { Area = "Security" })';"*@>
                                <i data-feather="arrow-left-circle"></i>
                                Back
                            </button>
                            <button type="submit" name="Submit" value="create"
                                    id="btnSubmit" disabled="disabled"
                                    class="btn btn-secondary me-2">
                                <i data-feather="upload"></i>
                                Submit
                            </button>
                            <button type="button" onclick="btnClearClicked()" class="btn btn-success">
                                <i data-feather="x-circle"></i>
                                Clear
                            </button>
                        </div>
                        <h2>TA & DA - RULES</h2>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12">

            <div class="heading_text_btn2 d-block mb-4">
                <h2>TA & DA Parameter :</h2>
            </div>

            <div class="card mb-4">
                <div class="card-body">                    
                        @*<form class="form-sample">*@
                    <div class="row d-flex align-items-center mb-3">
                        <label class="col-form-label col-md-3">
                            1. DA Per Day Is Actual Spent? :
                        </label>
                        <div class="col-md-6 form-group mb-2">
                            @Html.DropDownListFor(m => m.IsDAActualSpend,
                               new[] {
                                   new SelectListItem { Text = "Yes", Value = "true" },
                                   new SelectListItem { Text = "No", Value = "false" } }, "-",
                               htmlAttributes: new
                                    {
                                       @class = "form-select pointer isvalidate is-valid",
                                       @onchange = "validatecontrol()"
                                    })
                        </div>
                    </div>
                        <div class="row d-flex align-items-center mb-3">
                            <label class="col-form-label col-md-3">
                                2. Lodging Expenses Allowed :
                            </label>
                            <div class="col-md-6 form-group mb-2">
                                @Html.DropDownListFor(m => m.IsLodgingAllowed,
                                   new[] {
                                       new SelectListItem { Text = "Yes", Value = "true" },
                                       new SelectListItem { Text = "No", Value = "false" } }, "-",
                                   htmlAttributes: new
                                        {
                                           @class = "form-select pointer isvalidate is-valid",
                                           @onchange = "validatecontrol()"
                                        })
                            </div> 
                        </div>

                        @*</form>*@
                </div>
                </div>

        </div>
        <div class="col-md-12">
            <div class="table-responsive" style="overflow-x:inherit;">

                <table class="table table-bordered mt-4">
                    <thead>
                        <tr>
                            <th scope="col">Zone Code & Name</th>
                            <th scope="col">DA Per Day</th>
                            <th scope="col">Maximum Allowed Lodging Expenses</th>
                            <th scope="col">Maximum Allowed Local Conveyance Per Day</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>
                                Metropolitan
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @*<label  for="Metro_DAPerDay" class="mytooltipDanger">Error</label>*@
                                        @Html.TextBoxFor(m => m.Metro_DAPerDay,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control valGroup1 only-numeric isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Metro_DAPerDay"  
                                            class="btn btn-outline-danger inVisible" 
                                            data-toggle="tooltip" data-placement="top" 
                                            title="Value must be 0 - 9999">
                                            <i data-feather="info"></i>
                                        </button>*@
                                </span>

                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.Metro_MaxLodgingExp,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup2 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Metro_MaxLodgingExp" 
                                            class="btn btn-outline-danger inVisible" 
                                            title="Value must be 0 - 9999" 
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.Metro_MaxLocalConv,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup3 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Maximum Value - 999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Metro_MaxLocalConv" 
                                            title="Maximum Value - 999" class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                        </tr>


                        <tr>
                            <td>
                                City
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.City_DAPerDay,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup1 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_City_DAPerDay" 
                                            title="Value must be 0 - 9999" class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.City_MaxLodgingExp,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup2 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_City_MaxLodgingExp" 
                                            title="Value must be 0 - 9999" class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.City_MaxLocalConv,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup3 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Maximum Value - 500"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_City_MaxLocalConv" 
                                            title="Maximum Value - 500" class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                        </tr>


                        <tr>
                            <td>
                                Town
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.Town_DAPerDay,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup1 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Town_DAPerDay"  class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.Town_MaxLodgingExp,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup2 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Value must be 0 - 9999"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Town_MaxLodgingExp" 
                                            title="Value must be 0 - 9999" 
                                            class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                            <td>
                                <span class="d-flex justify-content-start align-items-center infoerror">
                                    <div class="form-group">
                                        @Html.TextBoxFor(m => m.Town_MaxLocalConv,
                                           htmlAttributes: new
                                           {
                                               @class = "form-control pointer only-numeric valGroup3 isvalidate is-valid",
                                               onkeyup = "validatecontrol()",
                                               title = "Maximum value - 200"
                                           })
                                    </div>
                                    @*<button type="button" id="tt_Town_MaxLocalConv" 
                                            title="Maximum value - 200" 
                                            class="btn btn-outline-danger inVisible"
                                            data-toggle="tooltip" data-placement="top">
                                        <i data-feather="info"></i>
                                    </button>*@
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bgColor mt-4">
                <ul style="list-style: none; padding: 0; font-size:28px;">
                    <li>
                        Are You Sure The Details Entered Are Correct & As Required?
                        <select id="submitConfirmation" class="form-select pointer is-valid" 
                                aria-label="Default select example" style="width:110px">
                            <option value="0">No</option>
                            <option selected value="1">Yes</option>
                        </select>
                    </li>
                </ul>
            </div>
        </div>
    }
</div>
@section headers
    {
    <link href="~/UIContent/CSS/Custom_ErrorToolTip.css" rel="stylesheet" />
    <style>
        .inVisible {
            display:none
        }
        .pointer {
            cursor: pointer;
        }
    </style>
}
@section scripts{
    <script src="~/UIContent/JS/CustomePage/SecurityRuleValidation.js"></script>
    <script>
        function btnClearClicked() {
            $('.isvalidate').each(function () {
                thisctrl = $(this);
                thisctrl.val('');
                if (thisctrl.attr("disabled") == "disabled") { } else { thisctrl.removeClass('is-valid').addClass('is-invalid') }
                /*$(this).removeClass('is-valid').addClass('is-invalid').val('');*/
            });
            $('#submitConfirmation').removeClass('is-valid').addClass('is-invalid').val('0');
            validateallcontrol();
        };
    </script>
    <script>
        $(document).ready(function () {
            var locconv = $('#IsLocalConvAllowed').val();

            $('.valGroup3').each(function () {
                thisctrl = $(this);
                if (locconv == "True") {
                    thisctrl.removeAttr("disabled").attr("placeholder", "Amount").removeClass('is-invalid').addClass('is-valid pointer');
                } else {
                    thisctrl.attr("disabled", "disabled").attr("placeholder", "NA").removeClass('is-invalid pointer').addClass('is-valid').val("");
                }
            });
            validatectrl("IsDAActualSpend", $('#IsDAActualSpend').val());
            validatectrl("IsLodgingAllowed", $('#IsLodgingAllowed').val());

        });
    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>  
    <script>
        $('#submitConfirmation').change(function () {
            var cnf = $(this);
            if (cnf.val() == 0) {
                cnf.removeClass('is-valid').addClass('is-invalid');
                $('#btnSubmit').attr("disabled", "disabled");
                //alert("Confirmation msg");
                Swal.fire({
                    title: 'Warning',
                    text: "Select Yes to procceed.",
                    icon: 'warning',
                    customClass: 'swal-wide',
                    buttons: {
                        //cancel: 'Cancel',
                        confirm: 'Ok'
                    },
                    //cancelButtonClass: 'btn-cancel',
                    confirmButtonColor: '#2527a2',
                });
            } else {
                cnf.removeClass('is-invalid').addClass('is-valid');
                $('#btnSubmit').removeAttr("disabled");
            };
        });
    </script>
}
