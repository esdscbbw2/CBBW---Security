@using System.Globalization;
@model CBBW.Areas.Security.ViewModel.CTVApprovalVM
@{

}
<div class="row newTable">
    @using (Html.BeginForm())
    {
        @Html.HiddenFor(m => m.IsOthViewed)
        @Html.HiddenFor(m => m.IsLVViewed)
        @Html.HiddenFor(m => m.IsBackMsg)
        @Html.HiddenFor(m => m.IsTabClicked)
        @Html.HiddenFor(m => m.NoteNumber)
        @Html.HiddenFor(m => m.IsBackDenied);
        @Html.HiddenFor(m => m.DateTimeofApproval);
        <div class="col-md-12">
            <div class="heading_text_btn mb-3 mt-4">
                <div class="leftButton">
                    <button id="btnBack" type="button" class="btn btn-primary me-2"
                            onclick="NormalBackBtnClicked('/Security/CTV2/ApprovalIndex')">
                        <i data-feather="arrow-left-circle"></i>
                        Back
                    </button>
                    <button id="btnSubmit" type="submit" name="Submit" value="create" disabled
                            class="btn btn-secondary me-2">
                        <i data-feather="upload"></i>
                        Submit
                    </button>
                    <button id="btnClear" type="button" onclick="ClearBtnClicked('/Security/CTV2/Approval?isClear=1')"
                            class="btn btn-white">
                        <i data-feather="x-circle"></i>
                        Clear
                    </button>
                </div>
                <h2 style="text-align: right;">“Company Transport” Vehicle Trip Schedule – APPROVAL</h2>
            </div>
        </div>
        <div class="col-md-12 mb-4">
            <div class="col-md-12">
                <div class="d-flex justify-content-center mt-2 upper-tab-buttons">
                    <button type="submit" name="Submit" value="TourRule" class="btn btn-primary me-2">
                        Tour
                        Rules
                    </button>

                    <button type="submit" name="Submit" value="TADARules" class="btn btn-primary me-2">
                        TA & DA
                        Rules
                    </button>

                    <button type="submit" name="Submit" value="LVTSChMat" class="btn btn-primary">
                        Local Vehicle
                        Schedule
                    </button>

                </div>
            </div>
            <div id="Section2" class="card mb-4 mt-4">
                <div class="card-body approvalForm">
                    @*<form class="form-sample form-inline row ms-auto">*@
                        <div class="row d-flex align-items-center mb-4">
                            <label class="col-form-label col-md-3">
                                Ref. Company Transport Vehicle Trip Schedule – ENTRY Note No :
                            </label>
                            <div class="col-md-3">
                                @Html.DropDownListFor(m => m.NoteNo,
                                           new SelectList(Model.ListofNoteNumbers, "NoteNo", "NoteNo"), "Select a note",
                                           htmlAttributes: new
                                           {
                                               @class = "form-select pointer canclear is-invalid"
                                           })

                            </div>
                            <label class="col-form-label col-md-1">
                                Date  :
                            </label>
                            <div class="col-md-2">
                                <input id="cNoteDate" type="text" class="form-control" value="" disabled>
                            </div>
                            <label class="col-form-label col-md-1">
                                Time  :
                            </label>
                            <div class="col-md-2">
                                <input id="cNoteTime" type="text" class="form-control" value="" disabled>
                            </div>

                        </div>
                        <div class="row d-flex align-items-center mb-4">
                            <label class="col-form-label col-md-3">
                                Center Code & Name  :
                            </label>
                            <div class="col-md-6">
                                <input id="txtCenterCodenName" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                        </div>
                        <div class="row d-flex align-items-center mb-4">
                            <label class="col-form-label col-md-3">
                                For The Month & Year  :
                            </label>
                            <div class="col-md-3">
                                <input id="txtForTheMonthYear" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                            <label class="col-form-label col-md-1">
                                From Date  :
                            </label>
                            <div class="col-md-2">
                                <input id="txtFromDate" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                            <label class="col-form-label col-md-1">
                                To Date  :
                            </label>
                            <div class="col-md-2">
                                <input id="txtToDate" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                        </div>
                        <div class="row d-flex align-items-center mb-4">
                            <label class="col-form-label col-md-3">
                                Vehicle No.  :
                            </label>
                            <div class="col-md-3">
                                <input id="txtVehicleNo" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                            <label class="col-form-label col-md-1">
                                Vehicle Type  :
                            </label>
                            <div class="col-md-2">
                                <input id="txtVehicleType" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                            <label class="col-form-label col-md-1">
                                Model Name  :
                            </label>
                            <div class="col-md-2">
                                <input id="txtModelName" type="text" class="form-control"
                                       value="" disabled>
                            </div>
                        </div>
                        <div class="row d-flex align-items-center">
                            <label class="col-form-label col-md-3">
                                Driver No. & Name  :
                            </label>
                            <div class="col-md-6">
                                <input id="txtDriverNonName" type="text" class="form-control" disabled>
                            </div>
                        </div>

                    @*</form>*@
                </div>
            </div>


            <div id="btnSection" class="col-md-12">
                <div class="d-flex justify-content-center mt-2">
                    <button id="btnLVT" type="submit" name="Submit" value="LVT"
                            class="btn btn-primary me-2" disabled>
                        Local
                        Vehicle Schedule - Date Wise
                        Vehicle Trip Details Entry
                    </button>

                    <button id="btnOVT" type="submit" name="Submit" value="OVT"
                            class="btn btn-primary" disabled>
                        Other
                        Trip Schedule - Date Wise Vehicle
                        Trip Details Entry
                    </button>
                </div>
            </div>
            @*<div class="bgColor bg-transparent alert alert-danger border-0 SLUStatement SLUSection">
                <ul style="list-style:none; display: flex; align-items: center; justify-content: center; margin: 0;">
                    <li style="font-size: 18px;">
                        The Entry Is Done As Per Policy &amp; As Required:
                        <div class="form-group">
                            <select class="form-select SLUCtrl" 
                                    aria-label="Default select example" disabled>
                                <option>-</option>
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select>
                        </div>
                    </li>
                </ul>
            </div>*@
            <div id="Section3" class="bgColor mt-4 mb-4 bg-transparent border-red text-center">
                <ul style="list-style:none;">
                    <li style="font-size: 16px;">
                        The Entry Is Done As Per Policy & As Required:
                        <select id="AcceptCmb" class="form-select SLUCtrl"
                                aria-label="Default select example" disabled>
                            <option selected value="">-</option>
                            <option value="1">Yes</option>
                            <option value="0">No</option>
                        </select>
                    </li>
                </ul>
            </div>
            <div class="card">
                <div id="AppSection" class="card-body text-dark approvalForm SLUSection">
                    @*<form class="form-sample form-inline row ms-auto">*@
                    <div class="row mt-3">
                        <label class="col-form-label col-md-3">
                            Approved :
                        </label>
                        <div class="col-md-2">
                            @Html.DropDownListFor(m => m.IsApprovedComboValue,
                                       new[] {
                                           new SelectListItem { Text = "-", Value = "-1" },
                                            new SelectListItem { Text = "Yes", Value = "1" },
                                            new SelectListItem { Text = "No", Value = "0" },
                                       },
                                       htmlAttributes: new
                                       {
                                           @class = "form-select pointer canclear is-invalid ApproveCtrl",
                                           @onchange = "ApproveStatusChanged()",
                                           @disabled = "disabled"
                                       })

                        </div>
                        <label class="col-form-label col-md-2">
                            Date &amp; Time Approved :
                        </label>
                        <div class="col-md-2">
                            <input type="text" class="form-control" value="@Model.DateTimeofApproval.ToString("dd/MM/yyyy hh:mm tt",CultureInfo.InvariantCulture)" disabled>
                            @*@Html.TextBoxFor(m => m.DateTimeofApproval, "{0:dd-MMM-yyyy hh:mm:ss tt}",
                               htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })*@
                        </div>
                        <label class="col-form-label col-md-2">
                            Reason If Not Approved :
                        </label>
                        <div class="col-md-2">
                            @Html.TextBoxFor(m => m.DisapprovalReason,
                               htmlAttributes: new
                               {
                                   @class = "form-control canclear",
                                   @disabled = "disabled",
                                   @onkeyup = "ValidateReason()",
                                   rows = "3"
                               })
                        </div>

                    </div>
                    @*</form>*@
                </div>
            </div>
        </div>
    }

</div>

@section headers{
    <style>
        .inVisible {
            display: none;
        }
        .pointer {
            cursor: pointer;
        }
    </style>

}
@section scripts{
    <script src="~/UIContent/JS/CustomePage/mySLUCtrl.js"></script>
    <script src="~/UIContent/JS/CustomePage/CommonReusableV2.js"></script>
    <script src="~/UIContent/JS/CustomePage/CTV/CTVApprovalV2.js"></script>
    <script>
        $(document).ready(function () {
            if ($('#IsTabClicked').val() == 1) {
                $('#IsApprovedComboValue').removeAttr('disabled');
            }
            else { $('#IsApprovedComboValue').attr('disabled', 'disabled'); }
        });
    </script>
    <script>
        $(document).ready(function () {
            //var mymsg = '@ViewBag.ErrMsg';
            if ('@ViewBag.ErrMsg' != '') {
                MyAlert(3,"@ViewBag.ErrMsg");
                @*Swal.fire({
                    title: 'Failed to submit',
                    text: "@ViewBag.ErrMsg",
                    icon: 'warning',
                    customClass: 'swal-wide',
                    buttons: {
                        //cancel: 'Cancel',
                        confirm: 'Ok'
                    },
                    //cancelButtonClass: 'btn-cancel',
                    confirmButtonColor: '#2527a2',
                });*@
            };
            if ('@ViewBag.Msg' != '') {
                MyAlertWithRedirection(1, "@ViewBag.Msg", "/Security/CTV2/ApprovalIndex");
                @*Swal.fire({
                    title: 'Confirmation',
                    text: "@ViewBag.Msg",
                    icon: 'success',
                    customClass: 'swal-wide',
                    buttons: {
                        confirm: 'Ok'
                    },
                    confirmButtonColor: '#2527a2',
                }).then(callback);
                function callback(result) {
                    if (result.value) {
                        var url = "/Security/CTV/ApprovalLists";
                        window.location.href = url;
                    }
                }*@
            };
        });
    </script>
}