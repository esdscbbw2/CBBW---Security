
@{

}
<div class="">
    <div class="row newTable">
        @*@Html.HiddenFor(m => m.ID)*@
        @using (Html.BeginForm())
        {
            <div class="fixedElement">
                <div class="col-md-12" style="position: relative;">
                    <div class="heading_text_btn mb-4 mt-4">
                        <div class="leftButton">
                            <button type="button" class="btn btn-primary me-2"
                                    onclick="window.location.href='/Security/CTV2/AddNote'">
                                <i data-feather="plus-circle"></i>
                                Add
                            </button>
                        </div>
                        <h2>“Company Transport” Vehicle Trip Schedule – ENTRY</h2>
                    </div>
                </div>

            </div>
        }
        <div class="table-responsive mb-4">
            <table class="table table-bordered btnalign w-100" 
                   id="tblNoteList">
                <thead>
                    <tr>
                        <th scope="col" rowspan="2">SL.No.</th>
                        <th scope="col">Note No.</th>
                        <th scope="col">Center Code & Name</th>
                        <th scope="col">Vehicle No.</th>
                        <th scope="col">For The Month & Year </th>
                        <th scope="col" rowspan="2" style="background-color: pink; color: #000">Actions</th>
                    </tr>
                    <tr>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterNoteNo" type="text" 
                                       class="form-control column-search"
                                       data-column-index="1"
                                       placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filtercentrCode" type="text" 
                                       class="form-control column-search" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterVehicleNo" type="text" 
                                       class="form-control column-search" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col">
                            <div class="form-group">
                                <input id="filterMonthnYear" type="text" 
                                       class="form-control column-search" placeholder="Search...">
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        </div>

    </div>
</div>
@section headers
    {
}
@section scripts{
    <script>
        $(document).ready(function () {
            var dtinstance = $('#tblNoteList').DataTable({
                columns: [
                    { 'data': 'RowNum' },
                    { 'data': 'NoteNumber', searchable: true  },
                    { 'data': 'CentreCodenName' },
                    { 'data': 'VehicleNumber' },
                    { 'data': 'ForTheMonthnYear' },
                    {
                        'data': 'NoteNumber', render: function (data, type, row, meta) {
                            //var viewBtn = '<button type="button" class="btn primaryLink" data-toggle="tooltip" data-placement="top"> <i data-feather="eye"></i></button>';
                            var viewBtn = '<button type="button" id="' + row.NoteNumber + '" onclick="FnViewNote(this)" class="btn primaryLink" data-toggle="tooltip" data-placement="top" title="Details"> <svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx=12 cy=12 r=3></circle></svg></button>';
                            var deleteBtn = '<button type="button" id="D_' + row.NoteNumber + '" onclick="FnDeleteNote(this)" class="btn secondaryLink" data-toggle="tooltip" data-placement="top" title="Remove" data-placement="top" title="" data-bs-original-title="Pending"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button>';
                            var editBtn = '<button type="button" id="E_' + row.NoteNumber + '" onclick="FnEditNote(this)" class="btn primaryLink" data-toggle="tooltip" data-placement="top" title="Edit" data-placement="top" title="" data-bs-original-title="Pending"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button>';
                            var mbtns = '<span class="actionBtn d-block">';
                            mbtns = mbtns + viewBtn;
                            //mbtns = mbtns + deleteBtn + editBtn;
                            if (row.CanDelete) { mbtns = mbtns + deleteBtn; }
                            if (row.CanEdit) { mbtns = mbtns + editBtn; }
                            mbtns = mbtns + '</span>';
                            return type === 'display' ? mbtns : data;
                        }
                    },
                ],
                bServerSide: true,
                sAjaxSource: '/Security/CTV2/GetEntryNoteList',
                "pagingType": "input",
            });
            $('input.column-search').on('keyup', function () {
                dtinstance.search(this.value).draw();;
            });
            $('input.column-search').on('click', function (e) {
                e.stopPropagation();
            });
        });
    </script>
}