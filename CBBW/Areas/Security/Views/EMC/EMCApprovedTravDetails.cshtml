@using System.Globalization;
@using CBBW.Areas.Security.ViewModel.EMC;
@model EMCTravellingDetailsVM
@{

}
@using (Html.BeginForm("EMCApproveNote", "EMC", FormMethod.Post))
{

    @Html.HiddenFor(x => x.NoteNumber)
    @Html.HiddenFor(x => x.travDetails.PublicTransports)
    @Html.HiddenFor(x => x.travDetails.VehicleType)
    @Html.HiddenFor(x => x.travDetails.EmpNoName)
    @Html.HiddenFor(x => x.travDetails.ReasonVehicleProvided)
    @Html.HiddenFor(x => x.travDetails.VehicleTypeProvided)

    <div class="">
        <div class="row newTable">
            <div class="fixedElement">
                <div class="col-md-12">
                    <div class="heading_text_btn mb-3 mt-4">
                        <div class="leftButton">
                            <button type="button" id="btnBack" class="btn btn-primary me-2">
                                <i data-feather="arrow-left-circle"></i>
                                Back
                            </button>
                            <button id="btnSubmit" onclick="SaveDataTravClicked()" disabled type="button" class="btn btn-secondary me-2">
                                <i data-feather="check-circle"></i>
                                Save
                            </button>
                            <button type="button" id="btnclr" onclick="Buttonclear()" class="btn btn-white">
                                <i data-feather="x-circle"></i>
                                Clear
                            </button>
                        </div>
                        <h2>Employees Travelling Schedule Details – APPROVAL (FOR MFG. CENTERS RECORDED AT NZB) </h2>
                    </div>
                </div>

            </div>
            <div class="col-md-12">
                <div class="heading_text_btn2 d-block mt-4">
                    <h2 class="text-left"> Travelling Details</h2>
                </div>
                <div class="heading_text_btn2 d-block mb-2">
                    <h2 class="text-center"> Travelling Details (I) </h2>
                </div>
            </div>

            <div class="col-md-12 mb-4">
                <div class="col-md-12 pt-3">
                    <div class="card">
                        <div class="card-body" id="TravDetails">
                            <div class="table-responsive max-content">
                                <table class="table table-bordered w-100 btnalign" id="table">
                                    <thead>
                                        <tr>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;">
                                                Public Transport
                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="12%">
                                                Request For Company Vehicle Type

                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="14%">
                                                Reason For Company Vehicle Type Request
                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="13%">
                                                Vehicle Type Provided
                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="10%">Reason For Vehicle Provided </th>
                                            <th scope="col" colspan="2" style="text-align: center; vertical-align: middle;">
                                                Scheduled Tour From
                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="9%">
                                                Scheduled Tour To Date
                                            </th>
                                            <th scope="col" rowspan="2" style="text-align: center; vertical-align: middle;" width="10%">Purpose Of Visit </th>
                                        </tr>
                                        <tr>
                                            <th scope="col" style="text-align: center; vertical-align: middle;" width="9%">Date</th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;" width="9%">Time</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model != null)
                                        {
                                            if (Model.travDetails != null)
                                            {
                                                <tr>

                                                    @if (Model.travDetails.PublicTransports == true)
                                                    {
                                                        <td class="text-center">Yes</td>
                                                    }
                                                    else
                                                    {
                                                        <td class="text-center">No</td>
                                                    }
                                                    @if (Model.travDetails.VehicleType == 0)
                                                    {
                                                        <td class="text-center">
                                                            NA
                                                        </td>
                                                    }
                                                    else if (Model.travDetails.VehicleType == 1)
                                                    {
                                                        <td class="text-center">
                                                            LV

                                                        </td>
                                                    }
                                                    else if (Model.travDetails.VehicleType == 2)
                                                    {
                                                        <td class="text-center">
                                                            2 wheeler

                                                        </td>
                                                    }
                                                    else if (Model.travDetails.VehicleType == 3)
                                                    {
                                                        <td class="text-center">
                                                            Public Transport

                                                        </td>
                                                    }

                                                    <td class="text-center">
                                                        @Model.travDetails.ReasonVehicleReq

                                                    </td>



                                                    <td class="text-center">

                                                        <select id="VehicleTypeProvideds" data-name="VehicleTypeProvidedtxt" data-name-text="VehicleTypeProvidedtxt"
                                                                onchange="ValidateControlCtrl()"
                                                                class="form-select is-invalid clear"
                                                                aria-label="Default select example">
                                                        </select>
                                                        <input type="hidden" id="VehicleTypeVal" />

                                                    </td>
                                                    <td class="text-center">
                                                        <textarea maxlength="200" id="ReasonVehicleProvideds" onchange="ValidateControlCtrl()" data-name="ReasonVehicleProvided" class="form-control is-invalid clear" cols="10" rows="2"></textarea>

                                                    </td>

                                                    <td class="text-center">
                                                        @Model.travDetails.SchFromDateDisplay

                                                    </td>
                                                    <td class="text-center">
                                                        @Model.travDetails.SchFromTime

                                                    </td>
                                                    <td class="text-center">
                                                        @Model.travDetails.SchTourToDateDisplay
                                                    </td>
                                                    <td class="text-center">
                                                        <textarea name="" id="" cols="20" rows="2" class="form-control pointer-default" readonly data-toggle="tooltip" data-placement="bottom">@Model.travDetails.PurposeOfVisit   </textarea>
                                                    </td>

                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                            <form class="form-sample form-inline row ms-auto mt-4 pt-3 mb-2">
                                <div class="row d-flex align-items-center" style="padding-top: 40px;">
                                    <div class="col-form-label col-md-3">
                                        <label>Authorized Employee No. & Name :</label>
                                    </div>
                                    <div class="col-md-5">

                                        <select id="EmployeeNonName" data-name="EmployeeNonNametxt" data-name-text="EmployeeNonNametxt"
                                                onchange="ValidateControlCtrl()"
                                                class="form-select is-invalid clear"
                                                aria-label="Default select example">
                                        </select>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                    <div id="dateDetails">
                        <div id="EV" class="bgColor mt-4 bg-transparent content border-red text-left">
                            <ul style="list-style:none;">
                                <li style="font-size: 16px;">
                                    Even Tough The Person Is Not Eligible For The Vehicle Type As Displayed In The Screen But Still You Are Providing Higher Class Vehicle Type? Are You Sure To Continue With The Vehicle Allotment:
                                    <select id="EligibleVeh" style="width: 110px;" class="form-select is-invalid clear" onchange="ValidateControlCtrl()" aria-label="Default select example">
                                        <option selected value="-1">-</option>
                                        <option value="1">Yes</option>
                                        <option value="0">No</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                        <div id="VA" class="bgColor mt-4 bg-transparent  content1 border-red text-left">
                            <ul style="list-style:none;">
                                <li style="font-size: 16px;">
                                    Even Tough The Person Is Eligible For Public Transport But Still You Are Providing Company Vehicle? Are You Sure To Continue With The Vehicle Allotment:
                                    <select id="VehicleAlloc" style="width: 110px;" class="form-select is-invalid clear" onchange="ValidateControlCtrl()" aria-label="Default select example">
                                        <option selected value="-1">-</option>
                                        <option value="1">Yes</option>
                                        <option value="0">No</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-12 pt-3 mt-3 pb-3">
                        <div class="heading_text_btn2 d-block mb-2">
                            <h2 class="text-center">Date Wise Tour – Details (II) </h2>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-bordered w-100 btnalign" id="table">
                                    <thead>
                                        <tr>
                                            <th scope="col" style="text-align: left; vertical-align: middle;">SL. No.</th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;" width="10%"> Scheduled Tour From Date</th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;" width="10%">Scheduled Tour To Date </th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;" width="20%">Tour Category </th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;">
                                                Center Code & Name
                                            </th>
                                            <th scope="col" style="text-align: center; vertical-align: middle;">Branch Code & Name </th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        @if (Model != null)
                                        {
                                            if (Model.dateTour.Count > 0)
                                            {
                                                var sl = 1;
                                                foreach (var item in Model.dateTour)
                                                {
                                                    <tr>
                                                        <td>@sl</td>
                                                        <td class="text-center">
                                                            @item.DDSchFromDate
                                                        </td>
                                                        <td class="text-center">
                                                            @item.DDSchToDate

                                                        </td>
                                                        <td class="text-center">

                                                            @item.TourCategory
                                                        </td>
                                                        <td class="text-center">
                                                            @item.CenterCodeName
                                                        </td>
                                                        <td class="text-center">
                                                            @item.BranchCodeName

                                                        </td>
                                                    </tr>
                                                    sl++;
                                                }
                                            }
                                        }

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
}
@section headers
{

}
@section scripts{
    <script src="~/UIContent/JS/jquery-3.6.0.min.js"></script>
    <script src="~/UIContent/JS/CustomePage/mySLUCtrl.js"></script>
    <script src="~/UIContent/JS/CustomePage/CommonReusable.js"></script>
    <script src="~/UIContent/JS/CustomePage/EMC/EMCTravApprove.js"></script>
    <script>
        $('#paragraphSpaceOPtion').change(function () {
            $(".content").addClass("border-green").removeClass("border-red");
        });
        $('.paragraphSpaceOPtion1').change(function () {
            $(".content1").addClass("border-green").removeClass("border-red");
        });
        $('.paragraphSpaceOPtion2').change(function () {
            $(".content2").addClass("border-green").removeClass("border-red");
        });
    </script>
    <script>


        $(document).ready(function () {
            $('#btnBack').click(function () {
                var url = "@ViewBag.BackUrl";
                var urlbk = url.replace(/&amp;/g, '&');

                window.location.href = urlbk;
            });
        });

    </script>

}