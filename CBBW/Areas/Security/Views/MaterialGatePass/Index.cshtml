@using CBBW.BOL.MGP
@model List<MGPNoteList>
@{
}




<div class="">
    <div class="row newTable">
        <div class="fixedElement">
            <div class="col-md-12" style="position: relative;">
                <div class="heading_text_btn mb-4 mt-4">
                    <div class="leftButton">
                        <button type="submit" class="btn btn-primary me-2" onclick="window.location.href='@Url.Action("Create", "MaterialGatePass",
                                    new { Area = "Security"})'">
                            <i data-feather="plus-circle"></i>
                            Add
                        </button>
                    </div>
                    <h2>Material Gate Pass (For Company Transport) – ENTRY </h2>


                </div>
            </div>
        </div>






        <div class="table-responsive">

            <table id="tblmgp" class="table w-100 table-bordered btnalign mt-4">
                <thead>
                    <tr>
                        <th scope="col" rowspan="2" colspan="1"> SL.No.</th>
                        <th scope="col" rowspan="1" colspan="1">Ref Note No.</th>
                        <th scope="col" rowspan="1" colspan="1">Center Code & Name</th>
                        <th scope="col" rowspan="1" colspan="1">Vehicle No.</th>
                        <th scope="col" rowspan="1" colspan="1">For The Month & Year</th>
                        <th scope="col" rowspan="2" colspan="1" style="background: pink;color: #000;">Action</th>
                    </tr>
                    <tr>

                        <th scope="col" rowspan="1" colspan="1">
                            <div class="form-group">
                                <input id="filterNoteno" type="text" class="form-control tblSearch" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col" rowspan="1" colspan="1">
                            <div class="form-group">
                                <input id="filterCenterCN" type="text" class="form-control tblSearch" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col" rowspan="1" colspan="1">
                            <div class="form-group">
                                <input id="filterVehicleNo" type="text" class="form-control tblSearch" placeholder="Search...">
                            </div>
                        </th>
                        <th scope="col" rowspan="1" colspan="1">
                            <div class="form-group">
                                <input id="filterMonthYear" type="text" class="form-control tblSearch" placeholder="Search...">
                            </div>
                        </th>

                    </tr>
                </thead>

            
                    
             
                <tbody>
                    <tr></tr>
                    @*@if (Model != null && Model.Count > 0)
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.RowNumber</td>
                                <td>@item.NoteNumber</td>
                                <td>@item.CenterName</td>
                                <td>@item.VehicleNo</td>
                                <td>@item.MonthYear</td>
                                <td>
                                    <span class="actionBtn">
                                        <button type="button" class="btn primaryLink" value="btn" data-toggle="tooltip" data-placement="top"
                                                title="Details">
                                            <i data-feather="eye"></i>
                                        </button>

                                    </span>
                                </td>
                            </tr>

                        }
                    }*@

                </tbody>
            </table>


        </div>

    </div>
</div>
@*<script src="~/UIContent/JS/jquery-3.6.0.min.js"></script>*@
@*<script>
    //$(document).ready(function () {
    //    var tbl = $('#tblmgp').DataTable(
    //        {
    //            "pagingType": "input"
    //        }
    //    );
    //    var filter1 = $('#filterentrDate');

    //    var filter2 = $('#filterEffDate');
    //    filter1.on('keyup change', function () {
    //        tbl.columns(1).search(this.value).draw();

    //    });
    //    filter2.on('keyup change', function () {
    //        tbl.columns(2).search(this.value).draw();

    //    });

    //});
</script>*@


@section headers
    {

}
@section scripts{
    <script>
        $(document).ready(function () {
            var dtinstance=$('#tblmgp').DataTable({
                columns: [
                    { 'data': 'RowNumber' },
                    { 'data': 'NoteNumber' },
                    { 'data': 'CenterName' },
                    { 'data': 'VehicleNo' },
                    { 'data': 'MonthYear' },
                    {
                        'data': 'NoteNumber', render: function (data, type, row, meta) {
                            return type == 'display' ? '<span class="actionBtn"><button type="button" id="' + row.NoteNumber+'" class="btn primaryLink" value="btn"  data-toggle="tooltip" data-placement="top" onclick="GetDetailsPage(this)" title = "Details" ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button ></span>' :
                                data;
                        }
                    },
                ],
                
                bServerSide: true,
                sAjaxSource: '/Security/MaterialGatePass/getNoteList',
                "pagingType": "input"
            });
            $('.tblSearch').on('keyup change', function () {
                dtinstance.search(this.value).draw();
            });
            $('.tblSearch').on('click', function (e) {
                e.stopPropagation();
            });
            
        });



        function GetDetailsPage(ctrl) {
            var targetid = $(ctrl).attr("id");
            var targetval = $(ctrl).attr('data-value'); 
            var url = '/Security/MaterialGatePass/Details?NoteNumber=' + targetid;
            window.location.href = url;
        };
    </script>
    }