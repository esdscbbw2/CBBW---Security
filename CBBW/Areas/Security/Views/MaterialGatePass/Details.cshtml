@using CBBW.BOL.MGP
@model MGPNotes
@{
    ViewBag.Title = "Material Gate Pass (For Company Transport)–ENTRY";

}


<div class="">

    @using (Html.BeginForm("Details", "MaterialGatePass", FormMethod.Post))
    {
        <div class="row newTable">

            <div class="fixedElement">
                <div class="col-md-12">
                    <div class="heading_text_btn mb-3 mt-4">
                        <div class="leftButton">
                            <button id="btnBack" type="button"
                                    class="btn btn-primary me-2">
                                <i data-feather="arrow-left-circle"></i>
                                Back
                            </button>

                        </div>
                        <h2>@ViewBag.Title</h2>
                        <div class="rightButton">
                            <button type="submit" class="btn btn-white" onclick="window.location.href='#';">
                                <i data-feather="printer"></i>
                                Print / View
                            </button>
                        </div>
                    </div>
                </div>

            </div>


            <div class="col-md-12 mb-4">
                <div class="card mb-4 mt-4">
                    <div class="card-body approvalForm">
                        <form class="form-sample form-inline row ms-auto">
                            <div class="row d-flex align-items-center mb-4">
                                <label class="col-form-label col-md-3">
                                    Ref. Company Transport Vehicle Trip Schedule – ENTRY Note No. :
                                </label>
                                <div class="col-md-3">
                                    @Html.DropDownListFor(m => m.NoteNo,
        new SelectList(Model.ListofNotes, "NoteNo", "NoteNo"),
        htmlAttributes: new
        {
            @class = "inVisible form-select",
            @readonly = true
        })

                                    @Html.DropDownListFor(m => m.NoteNumber,
        new SelectList(Model.ListofNotes, "NoteNo", "NoteNo"),
        htmlAttributes: new
        {
            @class = "form-select",
            disabled = "disabled"
        })
                                </div>

                                <label class="col-form-label col-md-1">
                                    Date  :
                                </label>
                                <div class="col-md-2">
                                     @Html.TextBox("CtvEntryDate","",
                               htmlAttributes: new { @class = "form-control", disabled = "disabled" })

                                   
                                </div>
                                <label class="col-form-label col-md-1">
                                    Time  :
                                </label>
                                <div class="col-md-2">
                                    @Html.TextBox("CtvEntryTime","",
        htmlAttributes: new { @class = "form-control", disabled = "disabled" })
                                </div>



                            </div>
                            <div class="row d-flex align-items-center mb-4">
                                <label class="col-form-label col-md-3">
                                    Center Code & Name  :
                                </label>
                                <div class="col-md-3">
                                    @Html.TextBoxFor(m => m.CenterCode, htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })
                                </div>
                                <label class="col-form-label col-md-1">
                                    Month & Year  :
                                </label>
                                <div class="col-md-2">
                                    @Html.TextBoxFor(m => m.FortheMonthnYear,
     htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })
                                </div>
                            </div>

                            <div class="row d-flex align-items-center mb-4">
                                <label class="col-form-label col-md-3">
                                    Vehicle No.  :
                                </label>
                                <div class="col-md-3">
                                    @Html.TextBoxFor(m => m.VehicleNo, htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })
                                </div>
                                <label class="col-form-label col-md-1">
                                    Vehicle Type  :
                                </label>
                                <div class="col-md-2">
                                    @Html.TextBoxFor(m => m.VehicleType, htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })
                                </div>
                                <label class="col-form-label col-md-1">
                                    Model Name  :
                                </label>
                                <div class="col-md-2">
                                    @Html.TextBoxFor(m => m.ModelName, htmlAttributes: new { @class = "form-control canclear", disabled = "disabled" })
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="d-flex justify-content-center mt-2">
                        <button id="btnCMOD" type="submit" name="Submit" value="CMOD"
                                class="btn btn-primary me-2">

                            Vehicle & Material Out Details
                        </button>
                        <button id="btnCMID" type="submit" name="Submit" value="CMID"
                                class="btn btn-primary me-2" disabled>

                            Vehicle & Material In Details
                        </button>
                    </div>
                </div>
                <div class="bgColor mt-4 bg-transparent border-blue">

                    <ul style="list-style:none;">
                        <li style="font-size: 16px;">
                            If The Driver Name Given In The System & The Person Driving The Vehicle Are Same:
                            <select id="driversame" style="width:110px"
                                    class="form-select"
                                    aria-label="Default select example" disabled>

                                <option selected value="Yes">Yes</option>

                            </select>
                        </li>
                    </ul>
                </div>
                <div class="bgColor mt-4 bg-transparent border-blue">

                    <ul style="list-style:none;">
                        <li style="font-size: 16px;">
                            Have You Collected / Given Back The Mobile Phone To The Driver Who Is Driving The Vehicle:

                            <select id="vehicledriver" style="width:110px"
                                    class="form-select" aria-label="Default select example" disabled>

                                <option selected value="Yes">Yes</option>

                            </select>
                        </li>
                    </ul>
                </div>





            </div>

        </div>
    }
</div>
@section headers
    {
    <style>
        .inVisible {
            display: none;
        }

        .pointer {
            cursor: pointer;
        }
    </style>
}

@section scripts{
    <script src="~/UIContent/JS/jquery-3.6.0.min.js"></script>
    @*<script src="~/UIContent/JS/CustomePage/MGPass.js"></script>*@
    <script>
        $(document).ready(function () {
            NotenumberforView($('#NoteNo').val());
        });
        function NotenumberforView(notenumber) {
            $.ajax({
                url: '/CTV/getDataFromNote',
                method: 'GET',
                data: { Notenumber: notenumber },
                dataType: 'json',
                success: function (data) {
                    $(data).each(function (index, item) {
                   
                        $('#CenterCode').val(item.CentreCodenName);
                        $('#FortheMonthnYear').val(item.FortheMonthnYear);
                        $('#VehicleNo').val(item.Vehicleno);
                        $('#VehicleType').val(item.VehicleType);
                        $('#ModelName').val(item.ModelName);
                        $('#CtvEntryDate').val(item.EntryDatestr);
                        $('#CtvEntryTime').val(item.EntryTime);
                        
                       
                    });
                    ActivateOutbtn(notenumber);
                }
            });
        };


        function ActivateOutbtn(notenumber) {
            var btnOut = $('#btnCMOD');
            var btnIn = $('#btnCMID');
            $.ajax({
                url: '/MaterialGatePass/GetHistoryInforView',
                method: 'GET',
                data: { Notenumber: notenumber },
                dataType: 'json',
                success: function (data) {
                    $(data).each(function (index, item) {
                        if (item.InActive == true) {
                                    btnIn.removeAttr('disabled');
                                }
                        });
                }

            });
        };

    </script>
    <script>
        $(document).ready(function () {
            $('#btnBack').click(function () {
                var url = "/Security/MaterialGatePass/Index";
                window.location.href = url;
              
            });
        });
    </script>
    
}


